# 青年大学习自动学习脚本

> 本项目仅供学习交流使用，不得用于商业用途，若因使用本项目导致的任何后果，与本人无关。
> 使用GitAction自己配置环境变量即可，环境变量的名字是Key，内容是扫码获得的内容，默认每周二开始学习，如有需要自己调整

# 说明

本脚本用于自动完成青年大学习的学习任务，在进行简单的初始化后，您便可摆脱每周的青年大学习打卡的束缚。
请注意，本脚本仅适用于**上海地区**、且平台为微信公众号**青春上海**的青年大学习任务。使用本脚本前，
请先保证您的计算机中已安装**Python3.6**或以上版本的Python环境。

# 快速上手

在使用之前，请确保学习用的微信账号**已经关注了`青春上海`微信公众号**，这十分重要！

1、安装必须的Python库

```bash
pip install -r requirements.txt
```

2、运行Flask服务器，请注意，host需要设置为局域网设备可访问的IP而非`127.0.0.1`，port可以自行设置

```bash
flask run --host=0.0.0.0 --port=11451
```

或者

```bash
python app.py
```

3、使用桌面端浏览器访问`http://<host>:<port>/`，并按照提示使用微信扫码登录

4、复制`1、调用脚本`中的Token

5、在计算机上运行脚本

```bash
python script.py [获取的Token]
```

# 详细说明

## 脚本文件说明

`script.py`是主要的脚本文件，用于完成青年大学习的学习任务。

### 主要参数

| 参数     | 说明                  |
|--------|---------------------|
| <登录信息> | 登录信息，获取方式见README.md |

### 可选参数

| 参数            | 含义       | 说明                                                                                      |
|---------------|----------|-----------------------------------------------------------------------------------------|
| -v, --version | /        | 输出当前版本号，然后退出程序                                                                          |                     
| -h, --help    | /        | 显示帮助并退出                                                                                 |
| -o, --orgId   | 自定义组织ID  | 可选，输入此项后，学习记录的组织ID将被替换为此项的值，若不填写，则默认为最后一次学习的组织ID                                        |
| -n, --name    | 姓名/学号/工号 | 可选，输入此项后，您的姓名/学号/工号将被替换为此项的值，若不填写，则默认为最后一次学习的信息                                         |
| -so, --subOrg | 子区域      | 可选，输入此项后，您的子区域信息将被替换为此项的值，若不填写，则默认为最后一次学习的信息，该项仅在四级组织需手动填写时需要填写，若四级组织存在，则请勿填写此项，会导致学习失败 |

### 例子

使用最后一次学习的信息完成新的学习任务

```bash
python script.py 1234567890abcdef
```

使用自定义信息完成新的学习任务

```bash
python script.py 1234567890abcdef -o N0001 -n "张三" -so "子区域1"
```

## Flask应用说明

Flask应用的端口可以随意更改，但开放Host必须能够从局域网访问到。在微信扫码成功获取登录信息后，若没有额外需求，
可以直接关闭Flask应用，登录信息是**长期有效**的，在青春上海平台更新前，不需要担心登录信息失效。

### 获取登录信息

流程同`快速上手`中的`3、使用桌面端浏览器访问`。

### 登录结果页面

`登录结果`页面提供了3种完成学习的方式，第一种是使用`script.py`脚本完成学习，第二种和第三种则为访问`Flask应用`相应URL的方式。

第一种方式在`1、调用脚本`和`脚本文件说明`中已经介绍过，这里不再赘述。

第二种方式如页面中介绍，扫描`登录结果`页面`2、访问URL`下方的二维码即可完成学习，
该链接长期有效，您可收藏后多次使用，默认以最后一次完成的组织信息完成最新一期的青年大学习，
若您在过去从未在青春上海平台完成青年大学习，则需使用第三种方式。

第三种方式如页面中介绍，在`登录结果`页面`3、自定义URL`下方，选择您需要完成学习的组织，
并填入您的姓名，点击`生成链接`获取学习链接，扫码即可完成学习。该链接长期有效，您可收藏后多次使用。

# 进阶

## 定时触发

正如文档中描述，无论是脚本还是Flask应用执行学习任务，都是运行一次后立即停止的，若您需要定时触发学习任务，
则需要自行编写定时任务。

### Linux

Linux下可以使用`crontab`命令来编写定时任务，具体使用方法请自行搜索。

### Windows

Windows下可以使用`计划任务`来编写定时任务，具体使用方法请自行搜索。

## 代理

若您的网络环境需要使用代理才能访问外网，则需在`config/api_config.py`中配置代理信息。

```python
# 代理配置
PROXY = {
    "http": "http://...",
    "https": "https://..."
}
```

# 免责声明

本项目仅供学习交流使用，不得用于商业用途，若因使用本项目导致的任何后果，与本人无关。
